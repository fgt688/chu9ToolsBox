<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>ä¹å”å‘¨æ˜“ç·šä¸Šèµ·å¦ç³»çµ± V2.6 - å‚³æ‰¿ç¶“å…¸ æ™ºè¯æœªä¾†</title>
    <meta name="description" content="ä¹å”å‘¨æ˜“ç ”ç©¶å®¤æä¾›å°ˆæ¥­çš„ç·šä¸Šå‘¨æ˜“èµ·å¦æœå‹™ã€‚çµåˆå‚³çµ±å¤§è¡ä¹‹æ•¸èˆ‡ç¾ä»£ç§‘æŠ€ï¼Œç‚ºæ‚¨æä¾›ç²¾æº–çš„å¦è±¡æ¨æ¼”ï¼ŒåŠ©æ‚¨æ’¥é›²è¦‹æ—¥ã€‚">
    <meta name="keywords" content="ä¹å”å‘¨æ˜“,ç·šä¸Šèµ·å¦,æ˜“ç¶“å åœ,å‘¨æ˜“é æ¸¬,å¤§è¡ä¹‹æ•¸,èµ·å¦å·¥å…·">
    <style>
        :root { --primary: #5d4037; --accent: #b71c1c; --gold: #d4a017; --bg: #fdfaf5; --green: #2e7d32; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", "STKaiti", "Kaiti", "æ¥·é«”", serif; background: var(--bg); margin: 0; padding: 10px; color: #333; }
        .container { width: 100%; max-width: 500px; margin: 0 auto; background: white; padding: 15px; border: 1px solid #d4c4a8; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .top-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 2px solid var(--primary); padding-bottom: 8px; }
        .mode-switch { display: flex; gap: 5px; }
        .tab { padding: 8px 12px; cursor: pointer; border: 1px solid var(--primary); color: var(--primary); border-radius: 20px; font-size: 0.8rem; }
        .tab.active { background: var(--primary); color: white; }
        .gua-input { width: 100%; padding: 12px; border: 1px solid #d4c4a8; border-radius: 8px; font-family: inherit; font-size: 1.1rem; color: var(--primary); background: #fffcf5; outline: none; text-align: center; margin-bottom: 10px; }
        .coin-wrap { display: flex; justify-content: center; gap: 12px; margin: 20px 0; perspective: 1000px; }
        .coin { width: 70px; height: 70px; position: relative; transform-style: preserve-3d; transition: transform 0.6s; }
        .coin-face { position: absolute; width: 100%; height: 100%; border-radius: 50%; display: flex; align-items: center; justify-content: center; backface-visibility: hidden; border: 3px solid #b8860b; font-weight: bold; font-size: 1.4rem; }
        .face-front { background: radial-gradient(circle, #ffeb3b, #fbc02d); color: #5d4037; } 
        .face-back { background: radial-gradient(circle, #f5f5f5, #bdbdbd); color: #616161; transform: rotateY(180deg); }
        .spinning { animation: fastSpin 0.7s linear infinite; }
        @keyframes fastSpin { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(1080deg); } }
        .gua-columns { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-top: 15px; }
        .gua-box { width: 100%; text-align: center; padding: 12px; background: #fffcf5; border: 1px solid #eaddca; border-radius: 8px; }
        .line-wrapper { display: flex; align-items: center; justify-content: center; gap: 12px; position: relative; margin-bottom: 8px; }
        .block { height: 14px; border-radius: 2px; }
        .yang-b { width: 130px; background: var(--accent); }
        .yin-b { width: 130px; display: flex; justify-content: space-between; }
        .yin-p { width: 60px; height: 14px; background: var(--primary); }
        .move-mark { position: absolute; right: 25px; color: var(--gold); font-size: 22px; font-weight: bold; }
        .btn { width: 100%; max-width: 280px; background: var(--primary); color: white; border: none; padding: 15px; font-size: 1.1rem; cursor: pointer; border-radius: 30px; margin: 15px auto; display: block; -webkit-appearance: none; font-weight: bold; }
        .btn-reload { background: var(--green); margin-top: 20px; margin-bottom: 20px; }
        .btn-complete { background: #9e9e9e; cursor: not-allowed; }
        .guide-box { font-size: 1.2rem; color: var(--primary); font-weight: bold; padding: 15px; background: white; border: 2px solid var(--gold); border-radius: 8px; line-height: 1.6; text-align: center; margin-top: 10px; }
        #event-display { font-size: 1.3rem; margin-bottom: 10px; text-align:center; color:var(--accent); font-weight:bold; }
        #oname_main, #cname_main { font-size: 1.4rem !important; color: #000; font-weight:bold; margin-bottom:10px; }
        .rule-note { padding: 15px; background: #f9f4e8; border: 1px dashed #d4c4a8; border-radius: 8px; font-size: 0.85rem; line-height: 1.6; color: #5d4037; }
        .history-item { padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <div class="top-nav">
        <div class="mode-switch">
            <span class="tab active" onclick="switchMode('auto')" id="tab-auto">èµ·å¦</span>
            <span class="tab" onclick="switchMode('manual')" id="tab-manual">æ‰‹å‹•</span>
            <span class="tab" onclick="toggleHistory(true)">æ­·å²</span>
        </div>
        <div style="font-size: 0.7rem; color: #999;">V2.6 </div>
    </div>

    <div id="auto-panel">
        <input type="text" id="gua-event" class="gua-input" placeholder="éœå¿ƒé»˜å¿µï¼Œæ–æ“²å…­çˆ»">
        <div class="coin-wrap">
            <div class="coin" id="c0"><div class="coin-face face-front">é™½</div><div class="coin-face face-back">é™°</div></div>
            <div class="coin" id="c1"><div class="coin-face face-front">é™½</div><div class="coin-face face-back">é™°</div></div>
            <div class="coin" id="c2"><div class="coin-face face-front">é™½</div><div class="coin-face face-back">é™°</div></div>
        </div>
        <button id="rollBtn" class="btn" onclick="startToss()">é–‹å§‹èµ·å¦</button>
    </div>

    <div id="manual-panel" style="display:none;">
        <input type="text" id="gua-event-manual" class="gua-input" placeholder="è¼¸å…¥å æ¸¬äº‹å®œ">
        <div id="selectors-container"></div>
        <button class="btn" onclick="executeManual()">ç”Ÿæˆå¦è±¡</button>
    </div>

    <div id="guaView" class="gua-columns" style="display:none;">
        <div id="event-display"></div>
        <div class="gua-box">
            <div id="oname_main"></div>
            <div id="originalLines" style="display:flex; flex-direction:column-reverse;"></div>
        </div>
        <div id="change-label" style="display:none; color:#999; font-size:1rem; margin:10px 0;">â–¼ ä¹‹å¦ â–¼</div>
        <div class="gua-box" id="changedBox" style="display:none;">
            <div id="cname_main"></div>
            <div id="changedLines" style="display:flex; flex-direction:column-reverse;"></div>
        </div>
    </div>

    <div id="result-area" style="display:none; margin-top:20px; border-top:2px solid #5d4037; padding-top:15px;">
        <div id="final-advice" class="guide-box"></div>
        
        <button id="copyBtn" onclick="copyResultToAI()" class="btn" style="background: #607d8b; margin-top: 15px;">ä¸€éµè¤‡è£½çµæœé¤µçµ¦ AI</button>
		
        <button onclick="location.reload()" class="btn btn-reload">é‡æ–°èµ·å¦</button>

         <div class="rule-note">
            <h4 style="margin:0 0 8px 0; border-bottom:1px solid #d4c4a8; display:inline-block;">æœ±ç†¹ã€Šæ˜“å­¸å•Ÿè’™ã€‹å å‰‡ï¼š<a href="jie.html" style="color: var(--accent); text-decoration: underline;">å‰å¾€è§£å¦æ‰‹å†Š >></a></h4><br>
            â€¢ <b>å…­çˆ»ä¸è®Š</b>ï¼šéœå¦ï¼Œä¾æœ¬å¦å¦è¾­å ã€‚<br>
            â€¢ <b>ä¸€çˆ»è®Š</b>ï¼šä¾æœ¬å¦è®Šçˆ»è¾­å ã€‚<br>
            â€¢ <b>äºŒçˆ»è®Š</b>ï¼šä¾æœ¬å¦äºŒè®Šçˆ»è¾­å ï¼Œä»¥ä¸Šçˆ»ç‚ºä¸»ã€‚<br>
            â€¢ <b>ä¸‰çˆ»è®Š</b>ï¼šç¶œåˆæœ¬å¦(è²)åŠä¹‹å¦(æ‚”)å¦è¾­ã€‚<br>
            â€¢ <b>å››çˆ»è®Š</b>ï¼šä¾ä¹‹å¦äºŒä¸è®Šçˆ»è¾­å ï¼Œä»¥ä¸‹çˆ»ç‚ºä¸»ã€‚<br>
            â€¢ <b>äº”çˆ»è®Š</b>ï¼šä¾ä¹‹å¦ä¸è®Šçˆ»è¾­å ã€‚<br>
            â€¢ <b>å…­çˆ»è®Š</b>ï¼šä¹¾å¤å ç”¨ä¹/ç”¨å…­ï¼Œé¤˜å¦å ä¹‹å¦å¦è¾­ã€‚<br>
			æ›´å»ºè­°è¤‡è£½çµæœç›´æ¥å• AIï¼Œéƒ½ä»€éº¼å¹´ä»£äº†ï¼Œä¸å¿…å†è®€å¤æ–‡ã€‚
        </div>
    </div>
</div>

<div id="history-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:999; justify-content:center; align-items:center;">
    <div style="background:white; width:90%; max-height:85%; padding:20px; border-radius:12px; overflow-y:auto; position:relative;">
        <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ddd; padding-bottom:10px; margin-bottom:10px;">
            <h3 style="margin:0; color:var(--primary);">å åœæ­·å²</h3>
            <button onclick="toggleHistory(false)" style="background:var(--accent); color:white; border:none; padding:5px 15px; border-radius:15px; cursor:pointer;">è¿”å›</button>
        </div>
        <div id="history-list"></div>
    </div>
</div>

<textarea id="copy-helper" style="position: absolute; left: -9999px; top: 0;" readonly></textarea>

<script>
const DB = {"111111":[1,"ä¹¾ç‚ºå¤©"],"000000":[2,"å¤ç‚ºåœ°"],"100010":[3,"æ°´é›·å±¯"],"010001":[4,"å±±æ°´è’™"],"111010":[5,"æ°´å¤©éœ€"],"010111":[6,"å¤©æ°´è¨Ÿ"],"000010":[7,"åœ°æ°´å¸«"],"010000":[8,"æ°´åœ°æ¯”"],"111011":[9,"é¢¨å¤©å°ç•œ"],"110111":[10,"å¤©æ¾¤å±¥"],"000111":[11,"åœ°å¤©æ³°"],"111000":[12,"å¤©åœ°å¦"],"101111":[13,"å¤©ç«åŒäºº"],"111101":[14,"ç«å¤©å¤§æœ‰"],"000100":[15,"åœ°å±±è¬™"],"001000":[16,"é›·åœ°è±«"],"100110":[17,"æ¾¤é›·éš¨"],"011001":[18,"å±±é¢¨è ±"],"000011":[19,"åœ°æ¾¤è‡¨"],"110000":[20,"é¢¨åœ°è§€"],"101001":[21,"ç«é›·å™¬å—‘"],"100101":[22,"å±±ç«è³"],"000001":[23,"å±±åœ°å‰"],"100000":[24,"åœ°é›·å¾©"],"100111":[25,"å¤©é›·ç„¡å¦„"],"111001":[26,"å±±å¤©å¤§ç•œ"],"100001":[27,"å±±é›·é ¤"],"011110":[28,"æ¾¤é¢¨å¤§é"],"010010":[29,"åç‚ºæ°´"],"101101":[30,"é›¢ç‚ºç«"],"001110":[31,"æ¾¤å±±å’¸"],"011100":[32,"é›·é¢¨æ’"],"001111":[33,"å¤©å±±é"],"111100":[34,"é›·å¤©å¤§å£¯"],"000101":[35,"ç«åœ°æ™‰"],"101000":[36,"åœ°ç«æ˜å¤·"],"101011":[37,"é¢¨ç«å®¶äºº"],"110101":[38,"ç«æ¾¤ç½"],"001010":[39,"æ°´å±±è¹‡"],"010100":[40,"é›·æ°´è§£"],"110001":[41,"å±±æ¾¤æ"],"100011":[42,"é¢¨é›·ç›Š"],"111110":[43,"æ¾¤å¤©å¤¬"],"011111":[44,"å¤©é¢¨å§¤"],"000110":[45,"æ¾¤åœ°èƒ"],"011000":[46,"åœ°é¢¨å‡"],"010110":[47,"æ¾¤æ°´å›°"],"011010":[48,"æ°´é¢¨äº•"],"101110":[49,"æ¾¤ç«é©"],"011101":[50,"ç«é¢¨é¼"],"100100":[51,"éœ‡ç‚ºé›·"],"001001":[52,"è‰®ç‚ºå±±"],"001011":[53,"é¢¨å±±æ¼¸"],"110100":[54,"é›·æ¾¤æ­¸å¦¹"],"101100":[55,"é›·ç«è±"],"001101":[56,"ç«å±±æ—…"],"011011":[57,"å·½ç‚ºé¢¨"],"110110":[58,"å…Œç‚ºæ¾¤"],"010011":[59,"é¢¨æ°´æ¸™"],"110010":[60,"æ°´æ¾¤ç¯€"],"110011":[61,"é¢¨æ¾¤ä¸­å­š"],"001100":[62,"é›·å±±å°é"],"101010":[63,"æ°´ç«æ—¢æ¿Ÿ"],"010101":[64,"ç«æ°´æœªæ¿Ÿ"]};

let results = [], step = 0;

function switchMode(m) {
    document.getElementById('auto-panel').style.display = m==='auto'?'block':'none';
    document.getElementById('manual-panel').style.display = m==='manual'?'block':'none';
    document.getElementById('tab-auto').className = m==='auto'?'tab active':'tab';
    document.getElementById('tab-manual').className = m==='manual'?'tab active':'tab';
    if(m==='manual') {
        const names = ["åˆçˆ»", "äºŒçˆ»", "ä¸‰çˆ»", "å››çˆ»", "äº”çˆ»", "ä¸Šçˆ»"];
        document.getElementById('selectors-container').innerHTML = names.map((n, i) => `
            <div style="display:flex; justify-content:space-between; align-items:center; margin:10px 0;">
                <b style="color:#5d4037; font-size:1.1rem;">${n}</b>
                <select id="yao-${i}" style="padding:10px; border-radius:5px; border:1px solid #d4c4a8; width:150px; font-size:1rem;">
                    <option value="7">å°‘é™½ â€”</option><option value="8">å°‘é™° - -</option>
                    <option value="9">è€é™½ â€” â—‹</option><option value="6">è€é™° - - Ã—</option>
                </select>
            </div>`).reverse().join('');
    }
}

function startToss() {
    const btn = document.getElementById('rollBtn');
    btn.disabled = true;
    const cs = [document.getElementById('c0'), document.getElementById('c1'), document.getElementById('c2')];
    cs.forEach(c => c.classList.add('spinning'));
    setTimeout(() => {
        cs.forEach(c => c.classList.remove('spinning'));
        let toss = [Math.random()>0.5?3:2, Math.random()>0.5?3:2, Math.random()>0.5?3:2];
        let sum = toss.reduce((a,b)=>a+b, 0);
        results.push(sum);
        toss.forEach((v, i) => cs[i].style.transform = v===3?'rotateY(0deg)':'rotateY(180deg)');
        document.getElementById('guaView').style.display = 'flex';
        renderLine(step, sum);
        step++;
        if(step < 6) { 
            btn.disabled = false; 
            btn.innerText = `æ–æ“²ç¬¬ ${step+1} çˆ»`; 
            btn.classList.remove('btn-complete');
        } else { 
            btn.innerText = "èµ·å¦å®Œæˆ"; 
            btn.classList.add('btn-complete');
            showFinal();
        }
    }, 600);
}

function renderLine(idx, sum) {
    const isYangO = (sum === 7 || sum === 9), isMove = (sum === 6 || sum === 9);
    const isYangC = isMove ? !isYangO : isYangO;
    const block = (y) => y ? `<div class="block yang-b"></div>` : `<div class="block yin-b"><div class="yin-p"></div><div class="yin-p"></div></div>`;
    let ol = document.createElement('div'); ol.className = "line-wrapper";
    ol.innerHTML = block(isYangO) + (isMove?'<span class="move-mark">â—‹</span>':'');
    document.getElementById('originalLines').appendChild(ol);
    let cl = document.createElement('div'); cl.className = "line-wrapper";
    cl.innerHTML = block(isYangC);
    document.getElementById('changedLines').appendChild(cl);
}

function showFinal(historyEventName = null) {
    let b1 = results.map(s=>(s===7||s===9?1:0)).join("");
    let b2 = results.map(s=>(s===6?1:(s===9?0:(s===7?1:0)))).join("");
    let moves = []; results.forEach((s,i)=>{if(s===6||s===9) moves.push(i+1)});
    let g1 = DB[b1], g2 = DB[b2];

    const eventName = historyEventName || document.getElementById('gua-event').value || document.getElementById('gua-event-manual').value || "éœå¿ƒæ‰€åœ";
    document.getElementById('event-display').innerText = "æ‰€æ¸¬ï¼š" + eventName;
    document.getElementById('oname_main').innerText = `æœ¬å¦ï¼š${g1[1]}`;
    document.getElementById('cname_main').innerText = `ä¹‹å¦ï¼š${g2[1]}`;
    document.getElementById('guaView').style.display = 'flex';
    document.getElementById('result-area').style.display = 'block';
    
    document.getElementById('change-label').style.display = moves.length > 0 ? 'block' : 'none';
    document.getElementById('changedBox').style.display = moves.length > 0 ? 'block' : 'none';

    let n = moves.length, advice = "";
    if(n===0) advice = `ã€å…­çˆ»ä¸è®Šï¼šéœå¦ã€‘<br>å ï¼š[ç¬¬ ${g1[0]} å¦]ã€Š${g1[1]}ã€‹å¦è¾­`;
    else if(n===1) advice = `ã€ä¸€çˆ»è®Šã€‘<br>å ï¼š[ç¬¬ ${g1[0]} å¦]ã€Š${g1[1]}ã€‹ç¬¬ ${moves[0]} çˆ»è¾­`;
    else if(n===2) advice = `ã€äºŒçˆ»è®Šã€‘<br>å ï¼š[ç¬¬ ${g1[0]} å¦]ã€Š${g1[1]}ã€‹ç¬¬ ${moves[0]}ã€${moves[1]} çˆ»è¾­<br>(ä»¥ä¸Šçˆ» ${moves[1]} ç‚ºä¸»)`;
    else if(n===3) advice = `ã€ä¸‰çˆ»è®Šã€‘<br>ç¶œåˆç ”è®€ï¼š<br>æœ¬å¦(è²)ï¼š[ç¬¬ ${g1[0]} å¦]ã€Š${g1[1]}ã€‹å¦è¾­<br>ä¹‹å¦(æ‚”)ï¼š[ç¬¬ ${g2[0]} å¦]ã€Š${g2[1]}ã€‹å¦è¾­`;
    else if(n===4) {
        let un = [1,2,3,4,5,6].filter(x => !moves.includes(x));
        advice = `ã€å››çˆ»è®Šã€‘<br>å ï¼š[ç¬¬ ${g2[0]} å¦]ã€Š${g2[1]}ã€‹ç¬¬ ${un[0]}ã€${un[1]} çˆ»è¾­<br>(ä»¥ä¸‹çˆ» ${un[0]} ç‚ºä¸»)`;
    }
    else if(n===5) {
        let un = [1,2,3,4,5,6].find(x => !moves.includes(x));
        advice = `ã€äº”çˆ»è®Šã€‘<br>å ï¼š[ç¬¬ ${g2[0]} å¦]ã€Š${g2[1]}ã€‹ä¸è®Šçˆ»è¾­`;
    }
    else if(n===6) {
        if(g1[0]===1) advice = `ã€å…­çˆ»çš†è®Šã€‘<br>å ï¼š[ç¬¬ 1 å¦] ä¹¾å¦ç”¨ä¹çˆ»è¾­`;
        else if(g1[0]===2) advice = `ã€å…­çˆ»çš†è®Šã€‘<br>å ï¼š[ç¬¬ 2 å¦] å¤å¦ç”¨å…­çˆ»è¾­`;
        else advice = `ã€å…­çˆ»çš†è®Šã€‘<br>å ï¼š[ç¬¬ ${g2[0]} å¦]ã€Š${g2[1]}ã€‹å¦è¾­`;
    }
    document.getElementById('final-advice').innerHTML = advice;
    if(!historyEventName) saveHistory(g1, results, eventName);
}

function executeManual() {
    results = []; step = 6;
    document.getElementById('originalLines').innerHTML = '';
    document.getElementById('changedLines').innerHTML = '';
    for(let i=0; i<6; i++) {
        let v = parseInt(document.getElementById(`yao-${i}`).value);
        results.push(v); renderLine(i, v);
    }
    showFinal();
}

function saveHistory(g, d, eventName) {
    let h = JSON.parse(localStorage.getItem('YiFinalStorage') || '[]');
    h.unshift({ time: new Date().toLocaleString(), name: g[1], id: g[0], data: [...d], event: eventName });
    localStorage.setItem('YiFinalStorage', JSON.stringify(h.slice(0, 30)));
}

function toggleHistory(s) {
    const m = document.getElementById('history-modal');
    m.style.display = s ? 'flex' : 'none';
    if(s) {
        let h = JSON.parse(localStorage.getItem('YiFinalStorage') || '[]');
        document.getElementById('history-list').innerHTML = h.map((x, i) => `
            <div class="history-item" onclick="loadHistory(${i})">
                <div style="font-size:0.75rem; color:#888;">${x.time}</div>
                <div style="color:var(--accent); font-weight:bold;">äº‹ï¼š${x.event}</div>
                <div style="color:#333;">[ç¬¬ ${x.id} å¦] ${x.name}</div>
            </div>`).join('') || '<div style="padding:20px; text-align:center; color:#999;">æš«ç„¡è¨˜éŒ„</div>';
    }
}

function loadHistory(idx) {
    let h = JSON.parse(localStorage.getItem('YiFinalStorage') || '[]');
    let item = h[idx];
    results = [...item.data]; step = 6;
    document.getElementById('originalLines').innerHTML = '';
    document.getElementById('changedLines').innerHTML = '';
    results.forEach((v, i) => renderLine(i, v));
    showFinal(item.event);
    toggleHistory(false);
}

// ç¹é«”é©é…çš„ä¸€éµè¤‡è£½åŠŸèƒ½
function copyResultToAI() {
    const eventText = document.getElementById('event-display').innerText;
    const mainGua = document.getElementById('oname_main').innerText;
    const changeGua = document.getElementById('changedBox').style.display !== 'none' ? document.getElementById('cname_main').innerText : '';
    const advice = document.getElementById('final-advice').innerText.replace(/<br>/g, '\n');
    
    const copyText = `æˆ‘æ­£åœ¨é€²è¡Œå‘¨æ˜“å åœï¼Œè«‹ä»¥è³‡æ·±æ˜“ç¶“å°ˆå®¶çš„èº«ä»½ï¼Œæ ¹æ“šä¸Šè¿°çµæœç‚ºæˆ‘æä¾›é€šä¿—æ˜“æ‡‚çš„è§£è®€èˆ‡å»ºè­°ã€‚\n\n${eventText}\n${mainGua}\n${changeGua}\n${advice}`;
    
    const copyBtn = document.getElementById('copyBtn');
    
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(copyText).then(() => {
            handleCopySuccess(copyBtn);
        }).catch(() => {
            fallbackCopy(copyText, copyBtn);
        });
    } else {
        fallbackCopy(copyText, copyBtn);
    }
}

function fallbackCopy(text, btn) {
    const textArea = document.getElementById('copy-helper');
    textArea.value = text;
    if (navigator.userAgent.match(/ipad|iphone/i)) {
        const range = document.createRange();
        range.selectNodeContents(textArea);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
    } else {
        textArea.select();
    }
    try {
        const successful = document.execCommand('copy');
        if (successful) handleCopySuccess(btn);
        else alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–');
    } catch (err) {
        alert('ç€è¦½å™¨ä¸æ”¯æŒä¸€éµè¤‡è£½ï¼Œè«‹æ‰‹å‹•é¸å–æ–‡å­—');
    }
    window.getSelection().removeAllRanges();
}

function handleCopySuccess(btn) {
    const oldText = btn.innerText;
    btn.innerText = "âœ… è¤‡è£½æˆåŠŸï¼å¿«å»è²¼ä¸Šå§";
    btn.style.background = "#2e7d32";
    setTimeout(() => {
        btn.innerText = oldText;
        btn.style.background = "#607d8b";
    }, 2500);
}
</script>

<footer style="margin-top: 50px; padding: 30px 10px; text-align: center; border-top: 1px solid #eaddca; font-family: 'STKaiti', 'Kaiti', serif;">
    <div style="display: flex; justify-content: center; gap: 18px; flex-wrap: wrap; font-size: 0.95rem; margin-bottom: 20px;">
        <a href="index.html" style="color: #5d4037; text-decoration: none; font-weight: bold;">â˜¯ï¸ èµ·å¦</a>
        <a href="jie.html" style="color: #5d4037; text-decoration: none; font-weight: bold;">ğŸ“– è§£å¦</a>
        
        <a href="javascript:void(0)" onclick="alert('ã€ä¹å”è‰å»¬ã€‘\nå¤§è¡ä¹‹æ•¸äº”åï¼Œå…¶ç”¨å››åæœ‰ä¹ã€‚\næœ¬å»¬è‡´åŠ›æ–¼ä»¥ç§‘æŠ€å‚³æ‰¿æ˜“å­¸ï¼Œç‚ºåŒé“æä¾›æ¸…æ·¨ã€æº–ç¢ºçš„å åœå·¥å…·ã€‚')" style="color: #5d4037; text-decoration: none;">ğŸ¡ è‰å»¬</a>
        
        <a href="javascript:void(0)" onclick="alert('ã€é£›é´¿å‚³æ›¸ã€‘\nå¦‚æœ‰ç–‘æ…®æˆ–åˆä½œæ„å‘ï¼Œå¯é€šè¯ï¼š\n\nğŸ“§ éƒµç®±ï¼šfgt688@gmail.com\nğŸ¦ X (Twitter)ï¼š@fgt688')" style="color: #5d4037; text-decoration: none;">ğŸ“¨ é£›é´¿</a>
        
        <a href="javascript:void(0)" onclick="alert('ã€éš±ç§æ”¿ç­–ã€‘\n1. æœ¬ç«™ä¸æ”¶é›†ç”¨æˆ¶å åœå…§å®¹ï¼Œæ­·å²å…§å®¹åƒ…ä¿å­˜åœ¨ç€è¦½å™¨æœ¬åœ°ã€‚\n2. ä½¿ç”¨ Google Analytics åƒ…ä½œæµé‡çµ±è¨ˆä»¥å„ªåŒ–æœå‹™ã€‚')" style="color: #999; text-decoration: none; font-size: 0.85rem;">ğŸ“œ æ¢æ¬¾</a>
    </div>

<div style="color: #8d6e63; font-size: 1rem; letter-spacing: 4px; margin-bottom: 12px; font-weight: 500; opacity: 0.8;">
    å‚³æ‰¿ç¶“å…¸ <span style="margin: 0 5px; color: #d4c4a8;">|</span> æ™ºè¯æœªä¾†
</div>

    <div style="font-size: 0.7rem; color: #bbb; letter-spacing: 1px;">
        Â© 2026 ä¹å”ç ”ç©¶å®¤ Â· ALL RIGHTS RESERVED
    </div>
</footer>

</body>
</html>